(()=>{"use strict";var e={3157:(e,a,r)=>{r(3792),r(3362),r(9085),r(9391);var n=r(3751),t=r(641),o={id:"app"};function i(e,a,r,n,i,u){var l=(0,t.g2)("router-view");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.bF)(l)])}const u={name:"App"};var l=r(6262);const d=(0,l.A)(u,[["render",i]]),c=d;var s=r(5220),p=r(33),v={class:"home"},f={key:0},y={key:1},g={key:2},A={key:0},h={key:1,class:"audio-list"},k=["onClick"];function b(e,a,r,n,o,i){var u=(0,t.g2)("AudioPlayer");return(0,t.uX)(),(0,t.CE)("div",v,[a[0]||(a[0]=(0,t.Lk)("h1",null,"Audio Files",-1)),n.loading?((0,t.uX)(),(0,t.CE)("div",f,"Loading...")):n.error?((0,t.uX)(),(0,t.CE)("div",y,(0,p.v_)(n.error),1)):((0,t.uX)(),(0,t.CE)("div",g,[0===n.audioFiles.length?((0,t.uX)(),(0,t.CE)("div",A,"No audio files found")):((0,t.uX)(),(0,t.CE)("div",h,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.audioFiles,(function(e){return(0,t.uX)(),(0,t.CE)("div",{key:e.id,class:"audio-item"},[n.selectedFile&&n.selectedFile.id===e.id?((0,t.uX)(),(0,t.Wv)(u,{key:0,audioFile:n.selectedFile},null,8,["audioFile"])):((0,t.uX)(),(0,t.CE)("div",{key:1,class:"audio-info",onClick:function(a){return n.playAudio(e)}},[(0,t.Lk)("h3",null,(0,p.v_)(e.fileName),1),(0,t.Lk)("p",null,(0,p.v_)(e.filePath),1)],8,k))])})),128))]))]))])}var m=r(459),w=r(388),P=r(953),L={class:"audio-player"},F={class:"debug-panel"},x={key:0},E={class:"audio-info"},C={class:"metadata"},_={class:"player-controls"},S=["src"],O={class:"controls"},X=["disabled"],M={key:0,class:"error"};function K(e,a,r,n,o,i){return(0,t.uX)(),(0,t.CE)("div",L,[(0,t.Lk)("div",F,[a[9]||(a[9]=(0,t.Lk)("h4",null,"Debug Information",-1)),(0,t.Lk)("ul",null,[(0,t.Lk)("li",null,"Audio ID: "+(0,p.v_)(r.audioFile.id),1),(0,t.Lk)("li",null,"File Path: "+(0,p.v_)(r.audioFile.filePath),1),(0,t.Lk)("li",null,"Audio Source URL: "+(0,p.v_)(n.audioSource),1),(0,t.Lk)("li",null,"Player State: "+(0,p.v_)(n.playerState),1),(0,t.Lk)("li",null,"Is Loaded: "+(0,p.v_)(n.isLoaded),1),(0,t.Lk)("li",null,"Is Playing: "+(0,p.v_)(n.isPlaying),1),(0,t.Lk)("li",null,"Has Error: "+(0,p.v_)(n.error),1),n.error?((0,t.uX)(),(0,t.CE)("li",x,"Error Message: "+(0,p.v_)(n.errorMessage),1)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",E,[(0,t.Lk)("h3",null,(0,p.v_)(r.audioFile.fileName),1),(0,t.Lk)("p",C,(0,p.v_)(n.formatMetadata(r.audioFile.metadata)),1)]),(0,t.Lk)("div",_,[(0,t.Lk)("audio",{ref:"audioPlayer",src:n.audioSource,onLoadedmetadata:a[0]||(a[0]=function(){return n.onAudioLoaded&&n.onAudioLoaded.apply(n,arguments)}),onError:a[1]||(a[1]=function(){return n.onAudioError&&n.onAudioError.apply(n,arguments)}),onPlay:a[2]||(a[2]=function(){return n.onPlay&&n.onPlay.apply(n,arguments)}),onPause:a[3]||(a[3]=function(){return n.onPause&&n.onPause.apply(n,arguments)}),onEnded:a[4]||(a[4]=function(){return n.onEnded&&n.onEnded.apply(n,arguments)}),onLoadstart:a[5]||(a[5]=function(){return n.onLoadStart&&n.onLoadStart.apply(n,arguments)}),onWaiting:a[6]||(a[6]=function(){return n.onWaiting&&n.onWaiting.apply(n,arguments)}),onCanplay:a[7]||(a[7]=function(){return n.onCanPlay&&n.onCanPlay.apply(n,arguments)}),controls:"",preload:"metadata"},null,40,S),(0,t.Lk)("div",O,[(0,t.Lk)("button",{onClick:a[8]||(a[8]=function(){return n.togglePlay&&n.togglePlay.apply(n,arguments)}),disabled:!n.isLoaded},(0,p.v_)(n.isPlaying?"Pause":"Play"),9,X),n.error?((0,t.uX)(),(0,t.CE)("span",M,(0,p.v_)(n.errorMessage),1)):(0,t.Q3)("",!0)])])])}r(6280),r(6918),r(8706),r(1688),r(3288),r(9868),r(9432),r(8459);var R=r(4335);const N={name:"AudioPlayer",props:{audioFile:{type:Object,required:!0,validator:function(e){return e&&e.id&&e.fileName},default:function(){return{id:"",fileName:"",filePath:"",metadata:"{}"}}}},setup:function(e){var a=(0,P.KR)(!1),r=(0,P.KR)(!1),n=(0,P.KR)(!1),o=(0,P.KR)(""),i=(0,P.KR)("initializing"),u=(0,P.KR)(null),l=(0,t.EW)((function(){var a;if(null===(a=e.audioFile)||void 0===a||!a.id)return d("No audio file ID available"),"";var r=window.location.origin,n="".concat(r,"/api/audio/").concat(e.audioFile.id,"/stream");return d("Audio URL:",n),n}));function d(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];(e=console).log.apply(e,["[AudioPlayer]",(new Date).toISOString()].concat(r))}function c(){return s.apply(this,arguments)}function s(){return s=(0,w.A)((0,m.A)().mark((function e(){var a;return(0,m.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l.value){e.next=3;break}return d("No audio source available"),e.abrupt("return",!1);case 3:return e.prev=3,d("Checking audio availability..."),e.next=7,R.A.head(l.value);case 7:return a=e.sent,d("Audio stream check response:",a.status),e.abrupt("return",200===a.status);case 12:return e.prev=12,e.t0=e["catch"](3),d("Audio stream check failed:",e.t0.message),d("Full error:",e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[3,12]])}))),s.apply(this,arguments)}function p(){return v.apply(this,arguments)}function v(){return v=(0,w.A)((0,m.A)().mark((function t(){var l,s;return(0,m.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==(l=e.audioFile)&&void 0!==l&&l.id){t.next=5;break}return d("No audio file available"),n.value=!0,o.value="No audio file available",t.abrupt("return");case 5:if(d("Toggle play called, current state:",{isPlaying:a.value,isLoaded:r.value,playerState:i.value,audioFile:e.audioFile}),u.value){t.next=9;break}return d("Audio player reference not found"),t.abrupt("return");case 9:if(t.prev=9,!a.value){t.next=15;break}d("Attempting to pause"),u.value.pause(),t.next=24;break;case 15:return d("Attempting to play"),t.next=18,c();case 18:if(s=t.sent,s){t.next=21;break}throw new Error("Audio stream not available");case 21:return d("Stream available, starting playback"),t.next=24,u.value.play();case 24:t.next=31;break;case 26:t.prev=26,t.t0=t["catch"](9),d("Playback error:",t.t0.message),n.value=!0,o.value="Playback failed: ".concat(t.t0.message);case 31:case"end":return t.stop()}}),t,null,[[9,26]])}))),v.apply(this,arguments)}function f(){d("Load started"),i.value="loading"}function y(){d("Waiting for data"),i.value="buffering"}function g(){d("Can play"),i.value="ready",r.value=!0}function A(){d("Playback started"),a.value=!0,i.value="playing"}function h(){d("Playback paused"),a.value=!1,i.value="paused"}function k(){d("Playback ended"),a.value=!1,i.value="ended"}function b(){d("Audio metadata loaded"),r.value=!0,n.value=!1,i.value="loaded"}function L(e){var a=e.target.error;d("Audio loading error:",a),n.value=!0,r.value=!1,i.value="error",o.value="Failed to load audio: ".concat(a?a.message:"Unknown error")}function F(e){if(!e)return"No metadata available";try{var a=JSON.parse(e);return"Size: ".concat(x(a.size),", Created: ").concat(new Date(a.created).toLocaleString())}catch(r){return e||"Invalid metadata"}}function x(e){if(0===e)return"0 Bytes";var a=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,n)).toFixed(2))+" "+r[n]}return(0,t.sV)((0,w.A)((0,m.A)().mark((function a(){var r;return(0,m.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return d("Component mounted, audio file:",e.audioFile),a.next=3,c();case 3:r=a.sent,r||(n.value=!0,o.value="Audio stream not available",i.value="error");case 5:case"end":return a.stop()}}),a)})))),{isPlaying:a,isLoaded:r,error:n,errorMessage:o,playerState:i,audioPlayer:u,audioSource:l,togglePlay:p,onLoadStart:f,onWaiting:y,onCanPlay:g,onPlay:A,onPause:h,onEnded:k,onAudioLoaded:b,onAudioError:L,formatMetadata:F}}},I=(0,l.A)(N,[["render",K],["__scopeId","data-v-66eacd62"]]),j=I;var W="/api/audio/";const B={getAllAudioFiles:function(){return(0,w.A)((0,m.A)().mark((function e(){return(0,m.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",R.A.get(W));case 1:case"end":return e.stop()}}),e)})))()},getAudioFile:function(e){return(0,w.A)((0,m.A)().mark((function a(){return(0,m.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",R.A.get(W+e));case 1:case"end":return a.stop()}}),a)})))()},createAudioFile:function(e){return(0,w.A)((0,m.A)().mark((function a(){return(0,m.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",R.A.post(W,e));case 1:case"end":return a.stop()}}),a)})))()},deleteAudioFile:function(e){return(0,w.A)((0,m.A)().mark((function a(){return(0,m.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",R.A["delete"](W+e));case 1:case"end":return a.stop()}}),a)})))()}},D={name:"HomeView",components:{AudioPlayer:j},setup:function(){var e=(0,P.KR)([]),a=(0,P.KR)(null),r=(0,P.KR)(!0),n=(0,P.KR)(null);function o(){return i.apply(this,arguments)}function i(){return i=(0,w.A)((0,m.A)().mark((function a(){var t;return(0,m.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r.value=!0,n.value=null,a.next=5,B.getAllAudioFiles();case 5:t=a.sent,e.value=t.data,console.log("Loaded audio files:",e.value),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),console.error("Failed to load audio files:",a.t0),n.value="Failed to load audio files";case 14:return a.prev=14,r.value=!1,a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[0,10,14,17]])}))),i.apply(this,arguments)}function u(e){console.log("Playing audio file:",e),a.value=e}return(0,t.sV)((function(){o()})),{audioFiles:e,selectedFile:a,loading:r,error:n,playAudio:u}}},T=(0,l.A)(D,[["render",b],["__scopeId","data-v-ece3dcd6"]]),z=T;var H=[{path:"/",name:"Home",component:z}],U=(0,s.aE)({history:(0,s.LA)("/"),routes:H});const V=U;var Q=(0,n.Ef)(c);Q.config.devtools=!0,Q.config.debug=!0,Q.config.performance=!0,Q.use(V),Q.mount("#app")}},a={};function r(n){var t=a[n];if(void 0!==t)return t.exports;var o=a[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.m=e,(()=>{var e=[];r.O=(a,n,t,o)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,t,o]=e[c],u=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(u=!1,o<i&&(i=o));if(u){e.splice(c--,1);var d=t();void 0!==d&&(a=d)}}return a}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,t,o]}})(),(()=>{r.d=(e,a)=>{for(var n in a)r.o(a,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a)})(),(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};r.O.j=a=>0===e[a];var a=(a,n)=>{var t,o,[i,u,l]=n,d=0;if(i.some((a=>0!==e[a]))){for(t in u)r.o(u,t)&&(r.m[t]=u[t]);if(l)var c=l(r)}for(a&&a(n);d<i.length;d++)o=i[d],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(c)},n=self["webpackChunkaudio_indexer"]=self["webpackChunkaudio_indexer"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))})();var n=r.O(void 0,[504],(()=>r(3157)));n=r.O(n)})();
//# sourceMappingURL=app.eb7006a6.js.map